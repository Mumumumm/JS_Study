<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <!--입력 정보 form안에 담기-->
    <form name="loginForm" action="">
        <div>
            <label for="userId">아이디:</label>
            <input type="text" name="nameId" id="userId">
        </div>

        <div>
            <label for="userPw">비밀번호:</label>
            <input type="password" name="namePw" id="userPw">
        </div>

        <input type="submit" name="submit" id="submit">
    </form>

    <script>
        //유저의 정보를 담기 전역으로
        const acount = [
            // 배열 안에 객체로 id 정보를 담기, pw를 문자열로 만든이유는 비밀번호가 숫자만 존재하지 않으니까
            { id: 'user1', pw: '1234' }, // 0
            { id: 'user2', pw: '2341' }, // 1
            { id: 'user3', pw: '3412' }, // 2
            { id: 'user4', pw: '4123' }, // 3
            { id: 'admin', pw: 'admin1234@' }, // 4
        ];

        //submit을 form에정보 전송
        document.forms['loginForm'].addEventListener("submit", logingInfo); // 폼에 submit 전송 account 정보를 전달 ()사용 x

        // 함수를 만들어 로그인정보 정의
        function logingInfo() {
            event.preventDefault(); // form에 action될 곳이 없으니 현재페이지 새로고침 방지용

            const acountId = document.getElementById("userId").value; // 아이디 정보(value)를 acountId에 대입
            const acountPw = document.getElementById("userPw").value; // 비밀번호 정보(value)를 acointPw에 대입

            let flag = false; // 같은 id가 나온적이 있었는지 확인용 //

            // for of 는  모든배열을 순회해서 정보가 맞는지 확인
            for (let info of acount) { // for of 사용해서 account에 배열을 info에 대입후 반복
                if (info.id === acountId) { // info 가 참이라면 해당 if를 실행
                    flag = true; // 같은 id가 나왔을때 ture로 변경
                    if (info.pw === acountPw) { // infoid 와 infopw 가 모두 같다면 실행
                        alert("로그인 성공 환영합니다" + info.id + "님");
                    } else { // infoPw가 맞지 않다면 실행
                        alert("비밀번호가 일치하지 않습니다");
                    }
                    break;
                }
            }
            if (flag === false) {
                alert("아이디가 존재하지 않습니다");
            }
        };

        //--------------------------------------------------------------------------------------------------------------------------------

        let user = null; // null 생성

        // forEach 리턴값이 없다
        acount.forEach((u) => { // acount 의 길이 만큼 u에 넣어서 계속 반복
            if (u.id === acountId) { // u에 id 가 acountId 일치할때
                user = u;
            }
        });

        if (!user) { // 반복해서 id가 맞지 않을때
            alert("아이디가 존재하지 않습니다");
            return;
        };
        if (user.pw === acountPw) {
            alert("로그인 성공 ");
        } else {
            alert("비밀번호 오류");
        }

        //--------------------------------------------------------------------------------------------------------------------------------

        user = null; // null 생성

        let userFind = user.find((userF) => userF.id === acountId)

        if (!user) {
            alert("아이디가 존재하지 않습니다");
            return;
        };
        if (user.pw === acountPw) {
            alert("로그인 성공 ");
        } else {
            alert("비밀번호 오류");
        }
    </script>
</body>

</html>