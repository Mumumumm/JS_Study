<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // 기본금액 5만원으로 시작을한다
      // 할인이 적용되는 범위는 추가금액으로 설정한다
      // 타임세일은 기본금액과 추가금액 모두를 포함한다
      function amount(addition, time) {
        let basicPrice = 50000; // 기본 금액 5만원
        let price = basicPrice + addition; // 합산금액 = 기본금액 + 추가금액
        if (addition >= 100000) { // 할인은 추가금액만 적용 addition
          addition = addition * 0.9;
          document.write("10만원 이상, 추가금액의 10% 할인적용 <br>");
        } else if (addition >= 50000) {
          addition = addition * 0.95;
          document.write("5만원 이상, 추가금액의 5% 할인적용 <br>");
        } else {
          document.write("5만원 미만은 할인이 없습니다 <br>");
        }
        price = basicPrice + addition; // 타임세일은 전체 할인 조건이기 때문에 위 추가금액 할인 먼저 확인 후 계산한뒤 타임세일 조건을 확인한다.
        if (time >= 10 && time <= 18) { // 오전 10시부터 오후 6시까지
          price = price * 0.95;
          document.write("타임세일에 맞춰 총금액의 5% 할인이 됩니다 <br>");
        } else {
          document.write("세일이 아닙니다 <br>");
        }
        return price; // 계산을 모두 마친뒤 합산금액 리턴
      }

      while (true) { // 무한 반복문
        let buy = parseInt(prompt("추가로 구매한 금액을 입력해주세요 기본금액 5만원"));
        let visit = parseInt(prompt("방문한 시간을 알려주세요 00~23시"));

        if (buy < 0 || visit < 0 || visit > 23) {
          confirm("잘못된 금액 또는 시간을 입력했습니다.");
          continue;
        }
        let amountChange = amount(buy, visit);
        document.write("총 합계 : ", amountChange);
        break; // 조건을 만족하고 빠져나감
      }
    </script>
  </body>
</html>
